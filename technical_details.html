<!DOCTYPE HTML>
<html lang="ru">
<head>
    <title>ТЗ - Web-технологии</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
    <style type="text/css">

    </style>
    <div class="container">

        <h1 class="text-center">Техническое задание</h1>

        <p>В качестве домашнего задания предлагается выполнить проект <b>«Вопросы и Ответы»</b>. Этот сервис позволит пользователям Интернета задавать вопросы и получать на них ответы. Возможности комментирования и голосования формируют сообщество и позволяет пользователям активно помогать другим. В качестве образца реализиции рекомендуется использовать <a target="_blank" href="http://stackoverflow.com"></a></p>

        <h3>Используемые технологии</h3>
        <p>Код приложения пишется на <b>python + django</b>, приложение запускается под управлением сервера <b>gunicorn</b>. База данных – <b>mysql</b>. Для отдачи статики используется <b>nginx</b>. Для доставки real-time сообщений <b>nginx + mod_push</b>. Для кеширования данных - <b>memcached</b>. Верстка выполняется с использованием <b>Twitter Bootstrap</b>. Взаимодействие интерфейса с пользователем обеспечивается <b>javascript/jquery</b>. Для авторизации и хранения пользователей можно использовать приложение <b>django.contrib.auth</b>.</p>

        <h3>Основные сущности</h3>
        <ol>
            <li>Пользователь – электронная почта, никнейм, пароль, аватарка, дата регистрации, рейтинг.</li>
            <li>Вопрос – заголовок, содержание, автор, дата создания, тэги, рейтинг.</li>
            <li>Ответ – содержание, автор, дата написания, флаг правильного ответа, рейтинг.</li>
            <li>Тэг - слово тэга.</li>
        </ol>

        <h3>Основные страницы и формы</h3>
        <ol>
            <li>
                <span>Листинг вопросов с пагинацией по 20 вопросов на странице. Необходимо реализовать сортировку по дате добавления и рейтингу (2 вида сортировки). В шапке сайта находятся: логотип, поисковая строка (для быстрого поиска по заголовку и содержимому вопроса), кнопка задать вопрос (доступна только авторизованным). В правой части шапки - юзерблок. Для авторизованного пользователя юзерблок содержит его ник, аватарку, ссылки на “выход” и на страницу с его профилем. Для неавторизованных - ссылки “войти” и “регистрация”.  В правой колонке - информационные блоки “Популярные тэги” и “Лучшие пользователи” (описание ниже). Во всех листингах присутвую кнопки “лайк/дизлайк”, позволяющие менять рейтинг вопроса.</span>
                <img src="img/main.png" class="img-responsive">
            </li>
            <li>
                <span>Страница добавления вопроса (можно сделать оверлеем). Доступна только для авторизованных пользователей. В форма вводится заголовок, текст вопроса и <b>тэги, через запятую</b>. С вопросом может быть связано не более 3 тегов.  Для подсказки при выборе тега можно использовать готовый jquery плагин. Готовые django приложения для тэгов  использовать запрещается. При обработке формы обязательно проверка валидности данных. Если вопрос успешно добавлен - пользователя перебрасывает на страницу вопроса, <b>если возникли ошибки - их нужно отобразить в форме</b>.</span>
                <img src="img/ask.png" class="img-responsive">
            </li>
            <li>
                <span>Страница вопроса со списком ответов. На странице вопроса можно добавить ответ. Ответы сортируются по рейтингу и дате добавления при равном рейтинге. Ответы разбиваются по 30 штук на странице. Форма добавления ответа находится на странице вопроса. Отображается <b>только для авторизованных пользователей</b>. После добавления ответа, <b>автор вопроса должен получить email</b> с уведомление от новом ответе. В этом письме должна быть ссылка для перехода на страницу вопроса.                Автор вопроса может пометить <b>один из ответов как правильный</b>. Пользователи могут голосовать за вопросы и ответы с помощью лайков «+» или «–». Один пользователь может голосовать за 1 вопрос и ответ <b>только 1 раз</b>, однаком может отменить свой выбор или переголосовать неограниченное число раз.</span>
                <img src="img/single.png" class="img-responsive">
            </li>
            <li>
                <span>Листинг вопросов по тэгу. На этой странице выводятся все вопросы содержащие некоторый тэг. Сортировка по рейтингу вопроса. Пагинация по 20 вопросов. Пользователи попадают на эту страницу кликая по одному из тэгов в описании вопроса.</span>
                <img src="img/tags.png" class="img-responsive">
            </li>
            <li>
                <span>Страница пользователя содержит его настройки - email, nick и аватарку. Каждый пользователь может смотреть только свою страницу. У пользователя должна быть возможность изменить email, nick и аватарку.</span>
                <img src="img/settings.png" class="img-responsive">
            </li>
            <li>
                <span>Форма авторизации. Состоит из поля логин и пароль. Дополнительно есть ссылка на форму регистрации. При успешной авторизации пользователь перебрасывается на исходную страницу, <b>при неуспешной авторизации в форме выводятся сообщения об ошибках формы.</b> Для авторизованных пользователей вместо этой формы должна показываться кнопка “Выйти”.</span>
                <img src="img/login.png" class="img-responsive">
            </li>
            <li>
                <span>Страница регистрации. Любой пользователь может зарегистрироваться на сайте, заполнив форму с электронной почтой, никнеймом, аватаркой и паролем. <b>Аватарка загружается на сервер и отображается рядом с вопросами и ответами пользователя</b>. <b>При неудачной регистрации в форме необходимо выводить сообщения об ошибках.</b></span>
                <img src="img/reg.png" class="img-responsive">
            </li>
            <li>Блок популярных тэгов. В правой колонке сайте находится облако из 20 наиболее популярных тегов. Популярными считаются те тэги, которые были использованы в наибольшем количесве вопросов. Генерация этого блока занимает много времени, поэтому этот блок необходимо генерировать <b>в фоне, с помощью cron скрипта</b>.</li>
            <li>Блок лучших пользователи (недели). В блок лучшие пользователи попадают 10 авторов задавших самые популярные вопросы или ответы за последнюю неделю. Т.е. вопросы и ответы, созданные за последнюю неделю сортируем по рейтингу. Выбираем топ N, их авторы и будут “лучшими”. Генерация этого блока занимает много времени, поэтому блок нужно подготавливать <b>в фоне, с помощью cron скрипта</b>.</li>
        </ol>

        <h3>Требования к проекту</h3>
        <ol>
            <li>Структура проекта должна быть понятна пользователям. Переходы по страницам осуществляются по ссылкам. Обработка форм должна осуществляться с редиректом.</li>
            <li>Код проекта должен быть аккуратным и без дублирования. Наличие больших повторяющихся фрагментов кода или шаблонов могут быть причиной снижения баллов.</li>
            <li>Верстка проекта должна быть выполнена с помощью css фреймворка Twitter Bootstrap.</li>
            <li>Код приложения должен быть чувствителен к входным данным и выдавать соответствующие коды и тексты ошибок. Сообщение пользователям «Вопрос добавлен», «Вопрос не был добавлен, потому что» выводятся в оверлее. Ответ сервера с кодом 500 может быть причиной снижения баллов.</li>
            <li>Время генерации страницы не должно зависеть от объема данных в базе.</li>
            <li>Страницы проекты не должны отдаваться более <b>1 секунды</b>.</li>
        </ol>

        <h3>Требования к объему данных</h3>
        <ul>
            <li>Пользователи > <b>10 000</b>.</li>
            <li>Вопросы > <b>100 000</b>.</li>
            <li>Ответы > <b>1 000 000</b>.</li>
            <li>Тэги > <b>10 000</b>.</li>
            <li>Оценки пользователей > <b>2 000 000</b>.</li>
        </ul>

        <h3>Дополнительные задания.</h3>
        <ol>
            <li>Real-time нотификации, уведомление о новых ответах при просмотре вопроса (<b>20 баллов</b>). С использованием long-polling или web sockets.</li>
        </ol>

        <h1 class="text-center">Оценка и разбаловка<a href="#mark"></a></h1>

        <h3>Пороговые баллы</h3>
        <ul>
            <li><b>0-39</b> — неудовлетворительно.</li>
            <li><b>40-59</b> — удовлетворительно.</li>
            <li><b>60-79</b> — хорошо.</li>
            <li><b>80-100</b> — отлично.</li>
        </ul>

        <h3>ДЗ 1 “Статическая верстка” - 16 баллов.</h3>
        <div>Верстка общего вида (layout) страницы - <b>4</b>:</div>
        <ul>
            <li>общий вид: 2 колонки, header, footer - <b>1</b>;</li>
            <li>правая колонка - <b>1</b>;</li>
            <li>блок авторизованного юзера - <b>1</b>;</li>
            <li>поисковая строка и логотип - <b>1</b>.</li>
        </ul>
        <div>Верстка листинга вопросов - <b>3</b>:</div>
        <ul>
            <li>общий вид (паддинги, аватарка) - <b>1</b>;</li>
            <li>кнопки лайков - <b>1</b>;</li>
            <li>тэги, счетчики ответов, остальное - <b>1</b>.</li>
        </ul>
        <div>Верстка страницы вопроса - <b>3</b>:</div>
        <ul>
            <li>общий вид - <b>1</b>;</li>
            <li>чекбокс “правильный ответ”, кнопки лайков - <b>1</b>;</li>
            <li>форма ответа - <b>1</b>.</li>
        </ul>
        <div>Верстка формы добавления вопроса - <b>3</b>:</div>
        <ul>
            <li>общий вид - <b>2</b>;</li>
            <li>сообщения об ошибках - <b>1</b>.</li>
        </ul>
        <div>Верстка форм логина и регистрации - <b>3</b>:</div>
        <ul>
            <li>общий вид - <b>2</b>;</li>
            <li>аватарка и сообщения об ошибках - <b>1</b>.</li>
        </ul>

        <h3>ДЗ 2 “Настройка серверов” - 14 баллов.</h3>
        <div>Настройка nginx для отдачи статического контента - <b>5</b>:</div>
        <ul>
            <li>общее - <b>3</b>;</li>
            <li>локейшен /upload/ приоритетнее статики - <b>1</b>;</li>
            <li>проксирование - <b>1</b>.</li>
        </ul>
        <div>Настройка gunicorn для запуска wsgi приложений - <b>2</b>:</div>
        <ul>
            <li>общее - <b>2</b>.</li>
        </ul>
        <div>Создание hello-world WSGI приложения - <b>2</b>:</div>
        <ul>
            <li>собственно hello-world - <b>1</b>;</li>
            <li>отображение списка GET, POST и других параметров - <b>1</b>.</li>
        </ul>
        <div>Создание django проекта - <b>2</b>:</div>
        <ul>
            <li>создание структуры проекта - <b>1</b>;</li>
            <li>создание hello-world view - <b>1</b>.</li>
        </ul>
        <div>Оценика производительности nginx и gunicorn - <b>3</b>:</div>
        <ul>
            <li>отдача статики - <b>1</b>;</li>
            <li>запуск WSGI - <b>1</b>;</li>
            <li>запуск WSGI с проксированием через nginx - <b>1</b>.</li>
        </ul>

        <h3>ДЗ 3 “Обработка HTTP запросов” - 14 баллов.</h3>
        <div>Создать views и шаблоны для основных страниц - <b>6</b>:</div>
        <ul>
            <li>главная (список новых вопросов) - <b>1</b>;</li>
            <li>страница вопроса (список ответов) - <b>1</b>;</li>
            <li>страница добавления вопроса - <b>1</b>;</li>
            <li>форма регистрации - <b>1</b>;</li>
            <li>форма входа - <b>1</b>;</li>
            <li>форма добавления вопроса - <b>1</b>.</li>
        </ul>
        <div>Создать urls.py для всех страниц - <b>4</b>:</div>
        <ul>
            <li>Собственно urls.py - <b>2</b>;</li>
            <li>Именованные маршруты (во всех шаблонах) - <b>2</b>.</li>
        </ul>
        <div>Постраничное отображение - <b>4</b>:</div>
        <ul>
            <li>функция пагинации - <b>1</b>;</li>
            <li>шаблон для отрисовки пагинатора - <b>2</b>;</li>
            <li>корректная обработка “неправильных” параметров - <b>1</b>.</li>
        </ul>

        <h3>ДЗ 4 “Работа с базой данных” - 14 баллов.</h3>
        <div>Проектирование модели - <b>5</b>:</div>
        <ul>
            <li>правильные адекватные типы данных и внешние ключи - <b>1</b>;</li>
            <li>своя модель пользователя - <b>1</b>;</li>
            <li>таблицы тэгов, лайков - <b>1</b>;</li>
            <li>query-setы для типовых выборок: новые вопросы, популярные, по тэгу - <b>2</b>.</li>
        </ul>
        <div>Наполнение базы тестовыми данными - <b>3</b>:</div>
        <ul>
            <li>наполнение данными - <b>2</b>;</li>
            <li>использование django management commands - <b>1</b>.</li>
        </ul>
        <div>Отображение списка вопросов - <b>3</b>:</div>
        <ul>
            <li>список новых вопросов - <b>1</b>;</li>
            <li>список популярных - <b>1</b>;</li>
            <li>список вопросов по тэгу - <b>1</b>.</li>
        </ul>
        <div>Отображение страницы вопроса - <b>3</b>:</div>
        <ul>
            <li>общее - <b>3</b>.</li>
        </ul>

        <h3>ДЗ 5 “Авторизация и обработка форм” - 15 баллов.</h3>
        <div>Вход на сайт - <b>3</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>возврат на исходную страницу - <b>1</b>;</li>
            <li>отображение ошибок - <b>1</b>.</li>
        </ul>
        <div>Регистрация на сайте - <b>3</b>:</div>
        <ul>
            <li>общее - <b>2</b>;</li>
            <li>отображение ошибок - <b>1</b>.</li>
        </ul>
        <div>Выход с сайта - <b>1</b>.</div>
        <div>Отображение текущего пользователя в шапке - <b>1</b>.</div>
        <div>Добавление вопроса - <b>4</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>добавление тэгов - <b>1</b>;</li>
            <li>отображение ошибок - <b>1</b>;</li>
            <li>редирект на страницу вопроса - <b>1</b>.</li>
        </ul>
        <div>Добавление ответа - <b>2</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>редирект на добавленный ответ - <b>1</b>.</li>
        </ul>
        <div>Проверка метода запроса <b>1</b>.</div>

        <h3>ДЗ 6 “Изображения и обработка AJAX запросов” - 11 баллов.</h3>
        <div>Загрузка и отображение аватарок пользователей - <b>4</b>:</div>
        <ul>
            <li>заливка картинок в uploads - <b>2</b>;</li>
            <li>отображение картинок из uploads - <b>2</b>.</li>
        </ul>
        <div>Страница редактирования профиля - <b>2</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>отображение ошибок - <b>1</b>.</li>
        </ul>
        <div>Лайки вопросов и ответов - <b>2</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>ajax - <b>1</b>.</li>
        </ul>
        <div>Отметка “правильный ответ” - <b>2</b>:</div>
        <ul>
            <li>общее - <b>1</b>;</li>
            <li>ajax - <b>1</b>.</li>
        </ul>
        <div>Проверка авторизации, csrf, метода запроса, авторства - <b>1</b>.</div>

        <h3>ДЗ 7 “Дополнительные функции” - 20 баллов.</h3>
        <div>Real-time сообщения - <b>8</b>:</div>
        <ul>
            <li>настройка nginx+mod_push - <b>2</b>;</li>
            <li>подключение к mod_push c помощью jQuery - <b>3</b>;</li>
            <li>отправка сообщений в mod_push - <b>3</b>.</li>
        </ul>
        <div>Блок популярные тэги - <b>4</b>:</div>
        <ul>
            <li>правильный расчет тэгов - <b>2</b>;</li>
            <li>предварительный расчет по cron - <b>2</b> (просто кеширование - <b>1</b>).</li>
        </ul>
        <div>Блок лучшие пользователи - <b>4</b>:</div>
        <ul>
            <li>правильный расчет пользователей - <b>2</b>;</li>
            <li>предварительный расчет по cron - <b>2</b> (просто кеширование - <b>1</b>).</li>
        </ul>
        <div>Поиск по заголовку и содержимому вопроса - <b>4</b>:</div>
        <ul>
            <li>коректная работа поиска - <b>1</b>;</li>
            <li>поисковые подсказки - <b>1</b>;</li>
            <li>отправка данных на сервер по мере ввода - <b>1</b>;</li>
            <li>ожидание ввода всех символов пользователем - <b>1</b>.</li>
        </ul>
    </div>
</body>
</html>
